<!DOCTYPE html>
<html>
<head>
<title>Student Registration</title>
</head>
<body>

<h2>Student Registration Form</h2>

<form onsubmit="return validate();">

  Name: <input type="text" id="name"><br><br>
  Email: <input type="text" id="email"><br><br>
  Phone: <input type="text" id="phone"><br><br>
  Age: <input type="number" id="age"><br><br>
  Marks (%): <input type="number" id="marks"><br><br>

  <input type="submit" value="Register">

</form>

<script>
function validate() {
  let name = document.getElementById("name").value.trim();
  let email = document.getElementById("email").value.trim();
  let phone = document.getElementById("phone").value.trim();
  let age = document.getElementById("age").value;
  let marks = document.getElementById("marks").value;

  // ---------- STRING FUNCTIONS (Name) ----------
  if (name.length == 0 || name.indexOf("0")!=-1 || name.indexOf("1")!=-1) {
    alert("Enter valid name");
    return false;
  }

  // ---------- STRICT EMAIL CHECK ----------
  let atPos = email.indexOf("@");
  let dotPos = email.lastIndexOf(".");

  // basic format
  if (atPos < 1 || dotPos < atPos + 2 || dotPos + 2 >= email.length) {
    alert("Invalid Email Format");
    return false;
  }

  // allowed email domains ONLY
  let validEmails = [
    "@gmail.com",
    "@yahoo.com",
    "@outlook.com",
    "@hotmail.com",
    "@rediffmail.com",
    "@protonmail.com"
  ];

  let isValidEmail = false;
  for (let i = 0; i < validEmails.length; i++) {
    if (email.endsWith(validEmails[i])) {    // string function endsWith()
      isValidEmail = true;
      break;
    }
  }

  if (!isValidEmail) {
    alert("Enter a valid email like Gmail, Yahoo, Outlook etc.");
    return false;
  }

  // ---------- STRING FUNCTIONS (Phone) ----------
  if (phone.length != 10) {
    alert("Phone must be 10 digits");
    return false;
  }

  let firstDigit = phone.charAt(0);          // string: charAt()
  if (firstDigit == "0") {
    alert("Phone number cannot start with 0");
    return false;
  }

  if (isNaN(Number(phone))) {                // must be digits
    alert("Phone must contain only digits");
    return false;
  }

  // ---------- MATH FUNCTIONS (Age) ----------
  age = Math.floor(age);     // integer age

  if (age < 12 || age > 50) {
    alert("Age must be between 12 and 50");
    return false;
  }

  // ---------- MATH FUNCTIONS (Marks) ----------
  marks = Math.round(marks); // round marks

  if (marks < 0 || marks > 100) {
    alert("Marks must be 0 - 100");
    return false;
  }

  alert("Registration Successful!");
  return true;
}
</script>

</body>
</html>
